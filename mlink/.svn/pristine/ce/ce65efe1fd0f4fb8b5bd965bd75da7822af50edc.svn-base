<div class="container" style="margin-top:30px;">
    <div class="row" style="padding:20px 0;">
        <form id="form_payments_comments" action="b_paid.php">
        <input type="hidden" name="ppid" value="<{$search.ppid}>">
        <input type="hidden" name="type" value="ajax" >
        <input type="hidden" name="act" value="savecomment" >
        <table class="table table-bordered">
            <tr>
              <td>Amount:</td>
              <td>$<{$payinfo.invoiceSum}></td>
            </tr>
            <tr>
              <td>Paid:</td>
              <td>$<input type="text" name="amount" value="<{$payinfo.Amount}>" /></td>
            </tr>
            <tr>
              <td>Trade Code:</td>
              <td><input type="text" name="code" value="<{$payinfo.Code}>"/></td>
            </tr>
            <tr>
            <td>Comment:</td>
            <td>
                <textarea name="comment" rows="7" style="width:100%"><{$payinfo.Comment}></textarea>
            </td></tr>
            <tr>
            <td>Op:</td>
            <td>
                <button type="button" class="btn btn-primary" onclick="save_form(this)">Save</button>
            </td></tr>
        </form>
    </div>
</div>

<script>
    function save_form(obj){
      var form_data = $('#form_payments_comments').serialize();
      var url = $('#form_payments_comments').attr('action');
      $(obj).attr('disabled','disabled');
      $(obj).html('Waiting...');
      
      $.post(url, form_data,
      function(data){
          $('#myModal').modal('hide');
      });
    }
</script>